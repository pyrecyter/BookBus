(window.webpackJsonpbus_booking=window.webpackJsonpbus_booking||[]).push([[0],{47:function(e,t,a){e.exports=a(78)},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(20),r=a.n(c),s=a(3),i=a(7),o=a(8),m=a(11),u=a(9),d=a(10),b=a(21),E=a(83),p=(a(79),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col s12 m7"},l.a.createElement("div",{class:"card",style:{width:"20rem"}},l.a.createElement("div",{class:"card-image"},l.a.createElement("img",{height:"220",src:"http://s3.amazonaws.com/bizenglish/wp-content/uploads/2019/03/28132918/KING-LONG-bus.jpg"}),l.a.createElement("span",{class:"card-title",style:{color:"White",weight:"bold"}},l.a.createElement("b",null,"Book Tickets"))),l.a.createElement("div",{class:"card-content"},l.a.createElement("p",null,"Book Buses")),l.a.createElement("div",{class:"card-action"},l.a.createElement(s.b,{to:"/booklist"},l.a.createElement(E.a,{className:"btn green darken-3"},"Book"))))),l.a.createElement("div",{class:"col s12 m7"},l.a.createElement("div",{class:"card",style:{width:"20rem"}},l.a.createElement("div",{class:"card-image"},l.a.createElement("img",{src:"https://www.consumerguide.sg/wp-content/uploads/Couple-travelling-flipped.jpg"}),l.a.createElement("span",{class:"card-title"},l.a.createElement("b",null,"Bus Details"))),l.a.createElement("div",{class:"card-content"},l.a.createElement("p",null,"Expore the Prices of Bus Tickets and details of Buses")),l.a.createElement("div",{class:"card-action"},l.a.createElement(s.b,{to:"/bus"},l.a.createElement(E.a,{className:"btn green darken-3"},"See Details"))))),l.a.createElement("div",{class:"col s12 m7"},l.a.createElement("div",{class:"card",style:{width:"20rem"}},l.a.createElement("div",{class:"card-image"},l.a.createElement("img",{src:"https://media.self.com/photos/5b048339fb856d7d3d02375d/4:3/w_752,c_limit/first-backpacking-trip.jpg"}),l.a.createElement("span",{class:"card-title"},l.a.createElement("b",null,"About Us"))),l.a.createElement("div",{class:"card-content"},l.a.createElement("p",null,"Want to know who we are ?")),l.a.createElement("div",{class:"card-action"},l.a.createElement(s.b,{to:"/about"},l.a.createElement(E.a,{className:"btn green darken-3"},"Learn")))))))}}]),t}(n.Component)),h=a(25),f=a.n(h);a(57),a(59);f.a.initializeApp({apiKey:"AIzaSyC_L57KOfg7-3J695v3Nv9T06ntaHhfhjM",authDomain:"bus-ticket-app-7c550.firebaseapp.com",databaseURL:"https://bus-ticket-app-7c550.firebaseio.com",projectId:"bus-ticket-app-7c550",storageBucket:"bus-ticket-app-7c550.appspot.com",messagingSenderId:"850686102896",appId:"1:850686102896:web:b7e61fb3faf1a37e2a13b5",measurementId:"G-YGLC1RZ4HV"});f.a.auth();var v=f.a.firestore(),g=(f.a,function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={busses:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getBus()}},{key:"getBus",value:function(){var e=this;console.log("Mounted"),v.collection("Buses").get().then((function(t){var a=[];t.forEach((function(e){var t=e.data();a.push(t)})),e.setState({busses:a}),console.log(t)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,l.a.createElement("u",null,"List of Busses")),this.state.busses&&this.state.busses.map((function(e){return l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col s12 m7"},l.a.createElement("div",{class:"card blue-grey darken-1"},l.a.createElement("div",{class:"card-content white-text"},l.a.createElement("span",{class:"card-title"},e.bname," \xa0",e.bno),l.a.createElement("p",null,"   "),l.a.createElement("p",null," Bus Number      : ",e.bno,"     "),l.a.createElement("p",null," Bus Ticket Price: ",e.bprice,"  "),l.a.createElement("p",null," No of Seats      : ",e.bseat,"   ")),l.a.createElement("div",{class:"card-action"},l.a.createElement("a",{href:"#"},"See Time Table")))))})))}}]),t}(n.Component)),k=a(18),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={Total:"",busses:"",check:"",bno:a.props.match.params.bno,bprice:a.props.match.params.bprice,date:a.refs.date},a.getBus=a.getBus.bind(Object(k.a)(a)),a.handleChange=a.handleChange.bind(Object(k.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getBus()}},{key:"handleChange",value:function(e){var t;this.setState({value:e.target.value}),console.log(e.target.value),t=this.state.bprice*e.target.value,console.log(this.state.bprice),console.log(t),this.setState({Total:t})}},{key:"getBus",value:function(){console.log("Mounted"),v.collection("Buses").where("bno","==","1").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));console.log(t)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.Total;return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(s.b,{className:"btn green darken-3",to:"/"},"Back"),l.a.createElement("h3",null,"Booking Details"),l.a.createElement("form",null,l.a.createElement("ul",{className:"collection"},l.a.createElement("li",{className:"collection-item"},"Bus Number : ",l.a.createElement("b",null,l.a.createElement("h5",null,this.state.bno))," "),l.a.createElement("li",{className:"collection-item"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{id:"date",type:"date",className:"validate",ref:"date",required:!0}),l.a.createElement("label",{htmlFor:"date"},"Select a Date ")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{id:"bticket",type:"number",className:"validate",required:!0,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"bticket"},"Number of Tickets")),l.a.createElement("label",null,"Total Price"),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{disabled:!0,value:"Your Total : "+e+" LKR",id:"disabled",type:"text",className:"validate"})))),l.a.createElement(s.b,{to:{pathname:"/cardpayment/".concat(this.state.bno,"/").concat(this.state.bprice),Total:e}},l.a.createElement("button",{className:"btn green"},"Book",l.a.createElement("i",{className:"material-icons right"},"send")))," \xa0"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={item:e.item},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col s12 m7"},l.a.createElement("div",{class:"card blue-grey darken-1"},l.a.createElement("div",{class:"card-content white-text"},l.a.createElement("span",{class:"card-title"},this.state.item.bname," \xa0",this.state.item.bno),l.a.createElement("p",null,"   "),l.a.createElement("p",null," Bus Number      : ",this.state.item.bno,"     "),l.a.createElement("p",null," Bus Ticket Price: ",this.state.item.bprice,"  "),l.a.createElement("p",null," No of Seats      : ",this.state.item.bseat,"   ")),l.a.createElement("div",{class:"card-action"},l.a.createElement(s.b,{to:"/bookform/".concat(this.state.item.bno,"/").concat(this.state.item.bprice)},"BOOK")))))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={busses:null},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getBus()}},{key:"getBus",value:function(){var e=this;console.log("Mounted"),v.collection("Buses").get().then((function(t){var a=[];t.forEach((function(e){var t=e.data();a.push(t)})),e.setState({busses:a}),console.log(t)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.busses&&this.state.busses.map((function(e){return l.a.createElement(O,{key:e.bno,item:e})}));return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("ul",{class:"collection with-header"},l.a.createElement("li",{class:"collection-header"},l.a.createElement("h4",null,"Choose a Bus")),e))}}]),t}(n.Component),y=a(24),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={Total:a.props.location.Total,bno:a.props.match.params.bno,bprice:a.props.match.params.bprice,tno:a.props.location.Total/a.props.match.params.bprice,REACT_APP_EMAILJS_USERID:"user_17Y3yksLiJyYnOXq04djD",templateId:"template_IldEFUEB",receiverEmail:"",formSubmitted:!1,feedback:"Test"},a.onSubmit=a.onSubmit.bind(Object(k.a)(a)),a.sendFeedback=a.sendFeedback.bind(Object(k.a)(a)),a.addingBook=a.addingBook.bind(Object(k.a)(a)),console.log(a.state.Total),console.log(a.state.bno),console.log(a.state.bprice),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t={fname:this.refs.fname.value,lname:this.refs.lname.value,email:this.refs.email.value,postcode:this.refs.postcode.value,cost:this.props.location.Total,Total:this.props.location.Total,bno:this.props.match.params.bno},a=this.state,n=a.templateId;a.receiverEmail;console.log(t,"onSubmit"),this.sendFeedback(n,this.sender,this.refs.email.value,this.state.feedback,this.refs.lname.value,this.refs.fname.value,this.state.bno,this.state.bprice,this.state.tno,t.cost),this.setState({formSubmitted:!0})}},{key:"sendFeedback",value:function(e,t,a,n,l,c,r,s,i,o){var m=this;window.emailjs.send("mailgun",e,{senderEmail:t,receiverEmail:a,feedback:n,lname:l,fname:c,bno:r,bprice:s,tno:i,cost:o}).then((function(e){m.addingBook(),console.log("MAIL SENT!"),m.setState({formEmailSent:!0})})).catch((function(e){return console.error("Failed to send feedback. Error: ",e)}))}},{key:"addingBook",value:function(){var e=this,t={uid:(new Date).getTime(),fname:this.refs.fname.value,lname:this.refs.lname.value,email:this.refs.email.value,bno:this.state.bno,bprice:this.state.bprice,tno:this.state.tno,Total:this.state.Total};v.collection("Bookings").doc(t.uid.toString()).set(t).then((function(){y.NotificationManager.info("Booking Added Check Your Mail :)","Success"),window.location="/"})).catch((function(t){y.NotificationManager.error(t.message,"Server failed"),e.setState({isSubmitting:!1})}))}},{key:"render",value:function(){var e=this.state.Total;this.state.date;return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("form",{id:"myform",className:"col s12",onSubmit:this.onSubmit},l.a.createElement(s.b,{className:"btn green darken-3",to:"/booklist"},"Back"),l.a.createElement("ul",{className:"collection"},l.a.createElement("li",{className:"collection-item"},l.a.createElement("h5",null,"Enter Card Details")),l.a.createElement("li",{className:"collection-item"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"face"),l.a.createElement("input",{id:"firstname",type:"text",className:"validate",ref:"fname",required:!0}),l.a.createElement("label",{htmlFor:"first_name"},"Frist Name")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"face"),l.a.createElement("input",{id:"lastname",type:"text",className:"validate",ref:"lname",name:"lname",required:!0}),l.a.createElement("label",{htmlFor:"last_name"},"Last Name")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"email"),l.a.createElement("input",{id:"email",type:"email",className:"validate",ref:"email",required:!0}),l.a.createElement("label",{htmlFor:"email"},"Email")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"room"),l.a.createElement("input",{id:"postalcode",type:"number",className:"validate",ref:"postcode",required:!0,onInput:function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,5)},min:5}),l.a.createElement("label",{htmlFor:"postalcode"},"Postal Code")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"credit_card"),l.a.createElement("input",{id:"card_number",type:"number",className:"validate",required:!0,onInput:function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,10)},min:10}),l.a.createElement("label",{htmlFor:"card_number"},"Card Number")),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"payment"),l.a.createElement("input",{id:"cvc",type:"number",className:"validate",required:!0,onInput:function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,3)},min:3}),l.a.createElement("label",{htmlFor:"cvc"},"CVC")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{disabled:!0,value:"Your Total : "+e+" LKR",id:"disabled",name:"cost",type:"text",className:"validate"})))),l.a.createElement("input",{type:"submit",className:"btn green",value:"Confrim"})))}}]),t}(n.Component),T=function(){return l.a.createElement("main",null,l.a.createElement(b.c,null,l.a.createElement(b.a,{exact:!0,path:"/",component:p}),l.a.createElement(b.a,{exact:!0,path:"/bus",component:g}),l.a.createElement(b.a,{exact:!0,path:"/booklist",component:j}),l.a.createElement(b.a,{exact:!0,path:"/bookform/:bno/:bprice",component:N}),l.a.createElement(b.a,{exact:!0,path:"/cardpayment/:bno/:bprice",component:B})))},w=(a(76),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("nav",{className:"green darken-3"},l.a.createElement("div",{class:"nav-wrapper"},l.a.createElement(s.b,{to:"/",class:"brand-logo center"},"NTB Booking"),l.a.createElement("a",{href:"#","data-target":"mobile-demo",class:"sidenav-trigger"},l.a.createElement("i",{class:"material-icons"},"menu")),l.a.createElement("ul",{class:"right hide-on-med-and-down"},l.a.createElement("li",null,l.a.createElement(s.b,{to:"/"},"HOME")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/booklist"},"BOOK")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/Bus"},"TIME TABLE")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/Bus"},"CONTACT US")))),l.a.createElement("ul",{class:"sidenav",id:"mobile-demo"},l.a.createElement("li",null,l.a.createElement(s.b,{to:"/"},"HOME")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/booklist"},"BOOK")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/Bus"},"TIME TABLE")),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/Bus"},"CONTACT US")))))}}]),t}(n.Component)),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={REACT_APP_EMAILJS_USERID:"user_17Y3yksLiJyYnOXq04djD",REACT_APP_EMAILJS_TEMPLATEID:"template_IldEFUEB",REACT_APP_EMAILJS_RECEIVER:"isuruliyanage1@gmail.com"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("div",{className:"container"},l.a.createElement(T,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(77);r.a.render(l.a.createElement(s.a,null,l.a.createElement(y.NotificationContainer,null),l.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.1307fe08.chunk.js.map